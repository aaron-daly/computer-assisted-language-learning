<section class="text-center">
    <h1>Hello <span>{{ username }}!</span></h1>
    <hr>
</section>

<div class="container">


<!-- PUPIL LIST SECTION -->
<section class="col-sm-5 col-sm-offset-1 text-center">

    <!-- PUPIL LIST  -->
    <h2>Pupils</h2>
    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
            <th class="text-left">Name</th>
            <th class="text-center">Completed</th>
            <th class="text-center">Progress</th>
            <th class="text-center">Remove</th>
            </thead>
            <tr dir-paginate="pupil in pupils | itemsPerPage:5 " pagination-id="pupilPagination">
                <td class="text-left">{{ pupil.username.replace(username, '') }}</td>
                <td class="text-center">{{ getScenarioCompletionTotal(pupil) }}/{{ getNumScenarios() }}</td>
                <td class="text-center">
                    <span class="glyphicon glyphicon-th-list" ng-click="togglePupil(pupil)" data-toggle="modal" data-target="#pupilModal"></span>
                </td>
                <td class="text-center">
                    <span class="glyphicon glyphicon-remove" ng-click="removePupil(pupil)"></span>
                </td>
            </tr>
        </table>
    </div>
    <dir-pagination-controls pagination-id="pupilPagination" max-size="5" direction-links="true"></dir-pagination-controls>

</section>

<!-- BUTTON SECTION -->
<section class="col-sm-3 col-sm-offset-2 col-xs-8 col-xs-offset-2 text-center">

    <h2>Tools</h2>
    <br>
    <button class="btn btn-info btn-block" data-toggle="modal" data-target="#gameModal">Enable Games</button>
    <hr>
    <button class="btn btn-info btn-block" ng-click="routeToAddScenario()">Create New Game</button>
    <hr>
    <button class="btn btn-info btn-block" data-toggle="modal" data-target="#registerModal">Register Pupils</button>
    <hr>
    <button class="btn btn-primary btn-block" ng-click="logout()">Logout</button>

</section>

<!-- GAME LIST MODAL -->
<div id="gameModal" class="modal fade col-sm-8 col-sm-offset-2" role="dialog">
    <div class="modal-dialog">

        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h3 class="modal-title">Game List</h3>
            </div>

            <div class="modal-body">

                <!-- GAME LIST -->
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                        <th class="text-left">Scenario</th>
                        <th class="text-center">Translations</th>
                        <th class="text-center">Enabled</th>
                        <th class="text-center">Preview</th>
                        <th class="text-center">Remove</th>
                        </thead>
                        <tr dir-paginate="scenario in groupScenarios | orderBy: 'scenarioName' | itemsPerPage:5 " pagination-id="pupilGamePagination">
                            <td class="text-left">
                                <span title="Conversation Game Icon" class="glyphicon icon-bubbles4" ng-if="scenario.scenarioType === 'Conversation'"></span>
                                <span title="Picture Game Icon" class="glyphicon icon-image" ng-if="scenario.scenarioType === 'Picture'"></span>
                                <span title="Word Game Icon" class="glyphicon icon-dice" ng-if="scenario.scenarioType === 'Word'"></span>
                                <span>{{ scenario.scenarioName }} - {{ scenario.scenarioLevel }}</span>
                            </td>
                            <td class="text-center">
                                <span class="glyphicon glyphicon-check" ng-show="containsTranslations(scenario) && !translationsEnabled(scenario)" ng-click="enableTranslations(scenario)"></span>
                                <span class="glyphicon glyphicon-check glyphicon-blue" ng-show="containsTranslations(scenario) && translationsEnabled(scenario)" ng-click="disableTranslations(scenario)"></span>
                            </td>
                            <td class="text-center">
                                <span class="glyphicon glyphicon-check" ng-show="!isEnabled(scenario)" ng-click="enableScenario(scenario)"></span>
                                <span class="glyphicon glyphicon-check glyphicon-blue" ng-show="isEnabled(scenario)" ng-click="disableScenario(scenario)"></span>
                            </td>
                            <td class="text-center">
                                <span class="glyphicon glyphicon-play" data-dismiss="modal" ng-click="previewScenario(scenario)"></span>
                            </td>
                            <td class="text-center">
                                <span class="glyphicon glyphicon-remove" ng-click="deleteScenario(scenario)"></span>
                            </td>
                        </tr>
                    </table>
                </div>
                <dir-pagination-controls pagination-id="pupilGamePagination" max-size="5" direction-links="true" boundary-links="true"></dir-pagination-controls>

                <h4>Game Types:</h4>
                <span title="Conversation Game Icon" class="glyphicon icon-bubbles4"> - Conversation</span><br>
                <span title="Picture Game Icon" class="glyphicon icon-image"> - Picture</span><br>
                <span title="Word Game Icon" class="glyphicon icon-dice"> - Word</span><br>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- PUPIL PROGRESS MODAL -->
<div id="pupilModal" class="modal fade col-sm-6 col-sm-offset-3" role="dialog">
    <div class="modal-dialog">

        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h3 class="modal-title">Progress of {{ selectedPupil.username.replace(username, '') }}</h3>
            </div>
            <div class="modal-body">
                <p>Games completed: {{ getScenarioCompletionTotal(selectedPupil) }}/{{ getNumScenarios() }}</p>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                        <th class="text-left">Scenario</th>
                        <th class="text-center">Type</th>
                        <th class="text-center">Level</th>
                        <th class="text-center">Completed</th>
                        </thead>
                        <tr dir-paginate="groupScenario in groupScenarios | itemsPerPage:5 " pagination-id="pupilProgressPagination">
                            <td class="text-left">{{ groupScenario.scenarioName }}</td>
                            <td class="text-center">
                                <span title="Conversation Game Icon" class="glyphicon icon-bubbles4" ng-if="groupScenario.scenarioType === 'Conversation'"></span>
                                <span title="Picture Game Icon" class="glyphicon icon-image" ng-if="groupScenario.scenarioType === 'Picture'"></span>
                                <span title="Word Game Icon" class="glyphicon icon-dice" ng-if="groupScenario.scenarioType === 'Word'"></span>
                            </td>
                            <td class="text-center">{{ groupScenario.scenarioLevel }}</td>
                            <td class="text-center">
                                <span class="glyphicon glyphicon-ok text-primary" ng-show="checkScenarioCompletion(selectedPupil, groupScenario)"></span>
                                <span class="glyphicon glyphicon-remove" ng-show="!checkScenarioCompletion(selectedPupil, groupScenario)"></span>
                            </td>
                        </tr>
                    </table>
                    <dir-pagination-controls pagination-id="pupilProgressPagination" max-size="5" direction-links="true" boundary-links="true"></dir-pagination-controls>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- PUPIL REGISTER MODAL -->
<div id="registerModal" class="modal fade col-sm-8 col-sm-offset-2" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" ng-click="clearRegistration()">&times;</button>
                <h3 class="modal-title">Register Pupils</h3>
            </div>
            <div class="modal-body">
                <!-- BATCH REGISTER SECTION -->
                <p class="text-info">Enter or copy & paste your pupils' names below. Each name must be on a new line, unique and one word only.</p>
                <form id="batch-register-form" ng-submit="batchRegister()" role="form">
                    <div class="form-group">
                        <label>Pupil Names</label>
                        <textarea class="form-control"
                                  id="batch-pupil-names-input"
                                  name="batchPupilNames"
                                  ng-model="batchPupilNames"
                                  rows="9"
                                  cols="10"
                                  required="required"></textarea>
                    </div>
                    <button type="submit" class="btn btn-info">Register Pupils</button>
                    <span id="register-error" class="text-danger" ng-if="registrationError">{{ registrationErrorMessage }}</span>
                    <span id="register-success" class="text-success" ng-if="successfulRegistration && !registrationError" >Pupils registered successfully!</span>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="clearRegistration()">Close</button>
            </div>
        </div>
    </div>
</div>

</div>